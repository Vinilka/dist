(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function h(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=h(s);fetch(s.href,o)}})();function p(i){const e=new Image;return e.src=i,e}const I="/Vinilka.github.io/assets/playerStandRight-DjvDmSGx.png",j="/Vinilka.github.io/assets/playerStandLeft-DEAAEG9d.png",A="/Vinilka.github.io/assets/playerMoveRight-D3Rde_7M.png",T="/Vinilka.github.io/assets/playerMoveLeft-BzurysD1.png",M="/Vinilka.github.io/assets/playerJumpRight-fcMDIpmw.png",O="/Vinilka.github.io/assets/playerJumpLeft-BRExVOJF.png";class B{constructor({canvas:e,context:h,gravity:r}){this.canvas=e,this.context=h,this.speed=10,this.gravity=r,this.position={x:100,y:100},this.velocity={x:0,y:1},this.width=134,this.height=150,this.jumpCount=0,this.image=p(I),this.frames=0,this.sprites={stand:{right:p(I),left:p(j),cropWidth:387.375},run:{right:p(A),left:p(T),cropWidth:395},jump:{right:p(M),left:p(O),cropWidth:395}},this.currentSprite=this.sprites.stand.right,this.currentCropWidth=this.sprites.stand.cropWidth}draw(){this.context.drawImage(this.currentSprite,this.currentCropWidth*this.frames,-5,this.currentCropWidth,454,this.position.x,this.position.y,this.width,this.height)}updatePlayerFrame(){this.frames++,this.frames>=16&&(this.currentSprite===this.sprites.stand.right||this.currentSprite===this.sprites.stand.left)?this.frames=0:this.frames>=20&&(this.currentSprite===this.sprites.run.right||this.currentSprite===this.sprites.run.left)?this.frames=0:this.frames>=30&&(this.currentSprite===this.sprites.jump.right||this.currentSprite===this.sprites.jump.left)&&(this.frames=0)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=this.canvas.height&&(this.velocity.y+=this.gravity)}}class J{constructor(e,h,r,s){this.context=s,this.image=p(e),this.position={x:h,y:r},this.width=280,this.height=180,this.padding=10,this.horizontalPadding=26,this.messageText="",this.messageIndex=0,this.messageVisible=!1,this.typingSpeed=50,this.scale=0,this.scaleIncrement=.03,this.textStartDelay=1e3}showMessage(e){this.messageText=e,this.messageIndex=0,this.messageVisible=!0,setTimeout(()=>this.typeMessage(),this.textStartDelay)}typeMessage(){this.messageIndex<this.messageText.length&&(this.messageIndex++,setTimeout(()=>this.typeMessage(),this.typingSpeed))}draw(){this.messageVisible&&(this.scale<1&&(this.scale+=this.scaleIncrement),this.context.save(),this.context.translate(this.position.x+this.width/2,this.position.y+this.height/2),this.context.scale(this.scale,this.scale),this.context.translate(-(this.position.x+this.width/2),-(this.position.y+this.height/2)),this.context.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),this.context.restore(),this.context.fillStyle="#1d6c7a",this.context.font="18px PatrickHand",this.wrapText(this.messageText.slice(0,this.messageIndex),this.position.x+this.horizontalPadding,this.position.y+this.padding,this.width-this.horizontalPadding*2,20))}wrapText(e,h,r,s,o){const u=e.split(" ");let x="",w=[],v="",W=null,k=0;for(let d=0;d<u.length;d++)v=x+u[d]+" ",W=this.context.measureText(v),k=W.width,k>s&&d>0?(w.push(x),x=u[d]+" "):x=v;w.push(x);const R=w.length*o;let D=r+(this.height-R)/2+o;for(let d=0;d<w.length;d++)this.context.fillText(w[d],h,D),D+=o}isVisible(){return this.messageVisible}}class z{constructor(e){this.context=e,this.dialogues=[]}addDialogue(e,h,r,s){const o=new J(e,h,r,this.context);this.dialogues.push({bubble:o,text:s,shown:!1})}showDialogue(e){e<this.dialogues.length&&!this.dialogues[e].shown&&(this.dialogues[e].bubble.showMessage(this.dialogues[e].text),this.dialogues[e].shown=!0)}resetDialogues(){this.dialogues.forEach(e=>{e.shown=!1,e.bubble.messageVisible=!1,e.bubble.messageIndex=0,e.bubble.scale=0})}updatePositions(e){this.dialogues.forEach(h=>{h.bubble.position.x+=e.x,h.bubble.position.y+=e.y})}draw(){this.dialogues.forEach(e=>{e.shown&&e.bubble.draw()})}}class f{constructor({x:e,y:h,image:r,context:s}){this.context=s,this.position={x:e,y:h},this.image=r,this.width=r.width,this.height=r.height}draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}}class P{constructor({x:e,y:h,image:r,context:s}){this.context=s,this.position={x:e,y:h},this.image=r,this.width=r.width,this.height=r.height}draw(){this.context.drawImage(this.image,this.position.x,this.position.y)}}const E="/Vinilka.github.io/assets/platform-ZmYJJPO7.png",F="/Vinilka.github.io/assets/hills-DPd9AaJB.png",q="/Vinilka.github.io/assets/background-CUvmzTqM.png",G="/Vinilka.github.io/assets/platformSmallTall-sZHpuomb.png",V="/Vinilka.github.io/assets/dialogueBoxRight-B75tebyr.png",m=document.querySelector("canvas"),l=m.getContext("2d");m.height=window.innerHeight;m.width=window.innerWidth;const H=1.1;let n=p(E),N=p(G),t,b=[],c,S=[],g;const a={right:{pressed:!1},left:{pressed:!1},up:{pressed:!1}};let y=0;function L(){n=p(E),t=new B({canvas:m,context:l,gravity:H}),b=[new f({x:n.width*4+250,y:270,image:N,context:l}),new f({x:0,y:470,image:n,context:l}),new f({x:n.width,y:470,image:n,context:l}),new f({x:n.width*2,y:470,image:n,context:l}),new f({x:n.width*3,y:470,image:n,context:l}),new f({x:n.width*4,y:470,image:n,context:l}),new f({x:n.width*5+200,y:470,image:n,context:l})],S=[new P({x:0,y:0,image:p(q),context:l}),new P({x:0,y:0,image:p(F),context:l})],c?c.resetDialogues():(c=new z(l),c.addDialogue(V,750,60,"Hello there! I'm Anastasia. Welcome to my game!"),c.addDialogue(V,1050,60,"I am passionate about programming and good looking designs")),y=0}function C(){requestAnimationFrame(C),l.fillStyle="white",l.fillRect(0,0,m.width,m.height),S.forEach(i=>{i.draw()}),c.draw(),b.forEach(i=>{i.draw()}),t.updatePlayerFrame(),t.update(),a.right.pressed&&t.position.x<400?t.velocity.x=t.speed:a.left.pressed&&t.position.x>100||a.left.pressed&&y===0&&t.position.x>0?t.velocity.x=-t.speed:(t.velocity.x=0,a.right.pressed?(y+=t.speed,b.forEach(i=>{i.position.x-=t.speed}),S.forEach(i=>{i.position.x-=t.speed*.66}),c.updatePositions({x:-t.speed*.66,y:0})):a.left.pressed&&y>0&&(y-=t.speed,b.forEach(i=>{i.position.x+=t.speed}),S.forEach(i=>{i.position.x+=t.speed*.66}),c.updatePositions({x:t.speed*.66,y:0}))),b.forEach(i=>{t.position.y+t.height<=i.position.y&&t.position.y+t.height+t.velocity.y>=i.position.y&&t.position.x+t.width>=i.position.x&&t.position.x<=i.position.x+i.width&&(t.velocity.y=0,t.jumpCount=0)}),t.position.x>200&&!c.dialogues[0].shown&&c.showDialogue(0),t.position.x>600&&!c.dialogues[1].shown&&c.showDialogue(1),a.up.pressed?(t.frames=1,g==="right"?(t.currentSprite=t.sprites.jump.right,t.currentCropWidth=t.sprites.jump.cropWidth):g==="left"&&(t.currentSprite=t.sprites.jump.left,t.currentCropWidth=t.sprites.jump.cropWidth)):a.right.pressed&&g==="right"&&t.currentSprite!==t.sprites.run.right?(t.frames=1,t.currentSprite=t.sprites.run.right,t.currentCropWidth=t.sprites.run.cropWidth):a.left.pressed&&g==="left"&&t.currentSprite!==t.sprites.run.left?(t.frames=1,t.currentSprite=t.sprites.run.left,t.currentCropWidth=t.sprites.run.cropWidth):!a.left.pressed&&g==="left"&&t.currentSprite!==t.sprites.stand.left?(t.frames=1,t.currentSprite=t.sprites.stand.left,t.currentCropWidth=t.sprites.stand.cropWidth):!a.right.pressed&&g==="right"&&t.currentSprite!==t.sprites.stand.right&&(t.frames=1,t.currentSprite=t.sprites.stand.right,t.currentCropWidth=t.sprites.stand.cropWidth),y>n.width*5+300&&console.log("you win"),t.position.y>m.height&&L()}L();C();addEventListener("keydown",({key:i})=>{switch(i){case"a":case"ArrowLeft":a.left.pressed=!0,g="left";break;case"s":case"ArrowDown":break;case"d":case"ArrowRight":a.right.pressed=!0,g="right";break;case"w":case"ArrowUp":if(t.jumpCount<2){t.jumpCount++,a.up.pressed=!0,t.velocity.y-=18;break}}});addEventListener("keyup",({key:i})=>{switch(i){case"a":case"ArrowLeft":a.left.pressed=!1;break;case"s":case"ArrowDown":break;case"d":case"ArrowRight":a.right.pressed=!1;break;case"w":case"ArrowUp":a.up.pressed=!1;break}});
